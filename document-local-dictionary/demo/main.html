<!doctype html>
<head>
<meta charset="UTF-8" />
<title>Dictionary - Web APIs</title>

<style>
.input-container {
  display: flex; /* Enables flexbox for the container */
  align-items: center; /* Aligns items vertically in the center */
  gap: 5px; /* Adds space between the input and the button */
}

.input-container input {
  flex-grow: 1; /* Allows the input to grow and fill available space */
}

.btn-group button {
  display: block; /* Make the buttons appear below each other */
  margin: 10px;  
}

.output {
  overflow: scroll;
  margin: 1rem 0;
  height: 200px;
}

</style>


<body>
<h1>Document: dictionary Interface</h1>

<p> The dictionary interface lets web application to add, remove own word list to the Document Local Dictionary.</p>
<p> It also allows the web application to check if the local dictionary has already contained certain words. </p>
 
<h2> Constructor </h2>

<div><u><b>DOMLocalDictionary()</u></b></div>
<div style="white-space: pre" />	Returns a new DOMLocalDictionary object. </div>

<h2> Instance methods </h2>

<div><u><b>Dictionary.add()</u></b><p>	- Adds a list of words (an array of strings) to the dictionary.</p></div>
<div><p>- JS Syntax: add() with Parameter of a JS String Array.</p> </div>

<div><u><b>Dictionary.delete()</u></b><p>	- Removes a list of words (an array of strings) from the dictionary.</p></div>
<div><p>- JS Syntax: delete() with Parameter of a JS String Array.</p> </div>

<div><u><b>Dictionary.has()</u></b><p>	- Checks if the dictionary has already contained a word (string).</p></div>
<div><p>- JS Syntax: check() with Parameter of a JS String.</p> </div>

<h2> Examples </h2>

<h4 id="JavaScript">Adding words</h4>
<div contenteditable rows="10" cols="50" style="background-color: #D3D3D3; width: max-content;">
<pre><code>
const dictionary = new DOMLocalDictionary();

// Add a single word.
dictionary.add(["Pikachu"], navigator.language);

// Add a list of words.
dictionary.add(["Igalia", "Wolvic", "Orca", "SpderMonkey", "Interop"], navigator.language);

// Add from a Json file.
const jsonObj = {
    "language": "en-US",
    "words": ["Pikachu", "Bulbasaur", "Ivysaur"]
};
const file = new Blob([JSON.stringify(jsonObj, null, 2)], {
    type: 'application/json',
});

const reader = new FileReader();
reader.onload = () => {
    const { language, words } = JSON.parse(reader.result);
    dictionary.add(words, language);
};
reader.readAsText(file);

</code></pre > </div>
<h2> Try it </h2>

<div>
<textarea id="editor" rows="10" cols="60" spellcheck="true" placeholder="Enter text...">
Igalia has been working on projects such as Wolvic, Orca, SpiderMonkey, Interop...
</textarea> </div>
<!--<div>
<button id="resetBtn" onclick="resetWords()">Reset</button> </span>
</div>-->

<h3> Add/Remove using Input</h3>

<div class="input-container">
<input type="text" id="addWords" placeholder="Words to add">
<div class="btn-group">
<button id="addBtn" onclick="addWords()">Add</button>
</div>
</div>

<div class="input-container">
<input type="text" id="removeWords" placeholder="Words to delete">
<div class="btn-group">
<button id="remvBtn" onclick="removeWords()">Delete</button>
</div>

</div>

<h3> Add/Remove using file</h3>
<div>
<input id="input" type="file" />
<div class="output"></div>

<button id="addFileBtn" onclick="addFile()">Add</button>
<button id="removeFileBtn" onclick="removeFile()">Delete</button>
</div>
</body>

<script>
const fileInput = document.getElementById("input");
const output = document.querySelector(".output");

document.getElementById("input").addEventListener("change", handleFiles, false);

function handleFiles() {
    const dictionary = new DOMLocalDictionary();
    const file = this.files[0];
    if (file) {
        output.innerText = file.text();
        const reader = new FileReader();
        reader.onload = () => {
            output.textContent = reader.result;
        };
        reader.readAsText(file);
    }
}


function addWords() {
	var wordArray = Array();
	const addInput = document.getElementById("addWords");
	let splits = addInput.value.split(` `);
	for (var i = 0; i < splits.length; i++) {
	    wordArray.push(splits[i]);
	}
const dictionary = new DOMLocalDictionary();

dictionary.add(wordArray, navigator.language);
}

function removeWords() {
	var wordArray = Array();
	const addInput = document.getElementById("removeWords");
	let splits = addInput.value.split(` `);
	for (var i = 0; i < splits.length; i++) {
	    wordArray.push(splits[i]);
	}
const dictionary = new DOMLocalDictionary();
dictionary.delete(wordArray, navigator.language);

}


function addFile() {
const { language, words } = JSON.parse(output.textContent);
const dictionary = new DOMLocalDictionary();
dictionary.add(words, language);
}

function removeFile() {
const { language, words } = JSON.parse(output.textContent);
const dictionary = new DOMLocalDictionary();
dictionary.delete(words, language);
}

function reset() {
}

</script>          


